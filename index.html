<!doctype html>
<html lang="no">
<head>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#FF4DB8">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Prompemaskin Remote</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- PeerJS (WebRTC) -->
  <script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>
</head>
<body>
  <div class="bg">
    <div class="float float1"></div>
    <div class="float float2"></div>
    <div class="float float3"></div>
  </div>

  <main class="app">
    <header class="top">
      <div class="brand">
        <div class="logo" aria-hidden="true">ğŸ’¨</div>
        <div>
          <h1>Prompemaskin Remote</h1>
          <p class="sub">Host = kontrollpanel â€¢ Join = spiller prompene</p>
        </div>
      </div>

      <div class="status" id="statusPill">
        <span class="dot" id="statusDot"></span>
        <span id="statusText">Ikke tilkoblet</span>
      </div>
    </header>

    <!-- ROLE SELECT -->
    <section class="card" id="screenRole">
      <h2>Velg modus</h2>
      <p class="muted">Ã…pne samme URL pÃ¥ begge telefoner. Velg <b>Host</b> pÃ¥ kontroll-telefonen og <b>Join</b> pÃ¥ lyd-telefonen.</p>

      <div class="btnRow">
        <button class="btn big primary" id="btnHost">
          <span class="btnIcon">ğŸ•¹ï¸</span>
          Host (kontroll)
        </button>

        <button class="btn big secondary" id="btnJoin">
          <span class="btnIcon">ğŸ“²</span>
          Join (lyd)
        </button>
      </div>

      <div class="hint">
        <div class="hintIcon">âœ¨</div>
        <div>
          Tips: PÃ¥ lyd-telefonen mÃ¥ du trykke <b>Aktiver lyd</b> Ã©n gang (nettleserkrav).
        </div>
      </div>
    </section>

    <!-- HOST SCREEN -->
    <section class="card hidden" id="screenHost">
      <div class="cardHead">
        <h2>Host: Kontrollpanel</h2>
        <button class="btn ghost" id="btnBackFromHost">Tilbake</button>
      </div>

      <div class="codeBox">
        <div class="codeLabel">Din 4-sifrede kode</div>
        <div class="code" id="hostCode">----</div>
        <button class="btn small" id="btnNewCode">Ny kode</button>
      </div>

      <div class="muted" style="margin-top:10px;">
        NÃ¥r Join kobler til, fÃ¥r du knapper som sender prompene.
      </div>

      <div class="panel">
        <h3>ğŸ›ï¸ ProMPE-panel</h3>
        <div class="grid6" id="hostButtons">
          <!-- Buttons injected by JS -->
        </div>

        <div class="miniRow">
          <label class="toggle">
            <input type="checkbox" id="chkHaptics" checked />
            <span class="track"></span>
            <span class="lbl">Haptics (vibrasjon) pÃ¥ trykk</span>
          </label>

          <button class="btn small secondary" id="btnTestPing">Test â€œplingâ€</button>
        </div>

        <div class="log" id="logHost"></div>
      </div>
    </section>

    <!-- JOIN SCREEN -->
    <section class="card hidden" id="screenJoin">
      <div class="cardHead">
        <h2>Join: Lyd-telefon</h2>
        <button class="btn ghost" id="btnBackFromJoin">Tilbake</button>
      </div>

      <div class="joinBox">
        <label class="field">
          <span>Host-kode (4 siffer)</span>
          <input id="joinCode" inputmode="numeric" maxlength="4" placeholder="f.eks. 1234" />
        </label>

        <button class="btn primary big" id="btnConnect">
          <span class="btnIcon">ğŸ”—</span>
          Koble til
        </button>

        <button class="btn secondary big" id="btnEnableAudio">
          <span class="btnIcon">ğŸ”Š</span>
          Aktiver lyd
        </button>

        <div class="muted smallText">
          â€œAktiver lydâ€ mÃ¥ trykkes minst Ã©n gang for at nettleseren skal tillate avspilling.
        </div>
      </div>

      <div class="receiver">
        <h3>ğŸ“» Mottaker</h3>
        <p class="muted">NÃ¥r Host trykker pÃ¥ knapper, spiller denne telefonen prompelydene.</p>
        <div class="nowPlaying" id="nowPlaying">Venterâ€¦</div>
        <div class="log" id="logJoin"></div>
      </div>
    </section>

    <footer class="foot">
      <span>Tip: legg til pÃ¥ startskjerm for â€œapp-fÃ¸lelseâ€.</span>
    </footer>
  </main>

  <script src="app.js"></script>
</body>
</html>
